<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Class of 2026 Countdown</title>

  <!-- Materialize CSS -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" rel="stylesheet" />

  <!-- Roboto font -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet" />

  <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />

  <!-- Canvas Confetti -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

  <style>
    body {
      font-family: 'Roboto', sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      transition: background 0.5s, color 0.5s;
      background-color: #121212;
      color: #eee;
      flex-direction: column;
      padding: 1rem;
      position: relative;
      overflow-x: hidden;
    }
    .card {
      padding: 2rem;
      border-radius: 12px;
      max-width: 550px;
      text-align: center;
      background: #1e1e1e;
      box-shadow: 0 8px 20px rgba(0,0,0,0.6);
      width: 100%;
      max-width: 600px;
      position: relative;
    }
    .time {
      font-size: 2.8rem;
      font-weight: 700;
      color: #90caf9;
      transition: color 0.5s;
    }
    .quip {
      font-size: 1.3rem;
      margin-top: 1rem;
      font-style: italic;
      opacity: 1;
      transition: opacity 0.8s ease;
      min-height: 40px;
      color: #fbc02d;
    }
    .progress-container {
      margin-top: 2rem;
      text-align: left;
    }
    .progress-label {
      font-weight: bold;
      margin-bottom: 0.5rem;
      color: #90caf9;
      transition: color 0.5s;
    }
    .progress {
      background-color: #333;
      border-radius: 20px;
      overflow: hidden;
      height: 20px;
    }
    .determinate {
      background-color: #42a5f5;
      height: 100%;
      width: 0;
      transition: width 1.5s ease-out;
    }
    body.day-theme {
      background-color: #f5f5f5;
      color: #333;
    }
    body.day-theme .card {
      background: white;
      box-shadow: 0 8px 20px rgba(0,0,0,0.2);
    }
    body.day-theme .time {
      color: #1976d2;
    }
    body.day-theme .progress-label {
      color: #1976d2;
    }
    body.day-theme .progress {
      background-color: #eee;
    }
    body.day-theme .determinate {
      background-color: #1976d2;
    }
    body.night-theme {
      background-color: #121212;
      color: #eee;
    }
    body.night-theme .card {
      background: #1e1e1e;
    }
    body.night-theme .time {
      color: #90caf9;
    }
    body.night-theme .progress-label {
      color: #90caf9;
    }
    body.night-theme .progress {
      background-color: #333;
    }
    body.night-theme .determinate {
      background-color: #42a5f5;
    }
    #mode-toggle {
      margin-top: 15px;
      padding: 10px 20px;
      font-size: 1rem;
      border: none;
      border-radius: 25px;
      background-color: #42a5f5;
      color: white;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(66,165,245,0.5);
      transition: background-color 0.3s ease;
      margin-right: 10px;
    }
    #mode-toggle:hover {
      background-color: #1e88e5;
    }
    #daily-quote {
      margin-top: 20px;
      font-style: normal;
      font-weight: 600;
      font-size: 1.1rem;
      max-width: 600px;
      text-align: center;
      color: #fbc02d;
      text-shadow: 0 0 8px rgba(251, 192, 45, 0.7);
      min-height: 44px;
      transition: opacity 0.8s ease;
    }

    /* Theme toggle fixed button bottom left */
    #theme-toggle {
      position: fixed;
      bottom: 15px;
      left: 15px;
      background-color: transparent;
      border: none;
      cursor: pointer;
      font-size: 1.8rem;
      color: #fbc02d;
      transition: color 0.3s ease;
      z-index: 9999;
      user-select: none;
    }
    #theme-toggle:hover {
      color: #fff176;
    }
  </style>
</head>
<body class="night-theme">
  <div class="card z-depth-3" role="main" aria-live="polite">
    <h4 id="mode-title">Graduation in</h4>
    <div class="time" id="countdown">Loading...</div>
    <div class="quip" id="quip">Getting ready for the tassel flip...</div>
    <div class="progress-container" aria-label="Progress towards graduation">
      <div class="progress-label" id="progress-percent">0% complete</div>
      <div class="progress" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
        <div class="determinate" id="progress-bar" style="width: 0%"></div>
      </div>
    </div>
  </div>

  <button id="mode-toggle" aria-pressed="false" aria-label="Toggle between Graduation and Summer countdown">Toggle Mode</button>

  <div id="daily-quote" aria-live="polite"></div>

  <!-- Theme toggle with Font Awesome icon bottom-left -->
  <button id="theme-toggle" aria-label="Toggle theme (dark/light)" title="Toggle theme">
    <i class="fas fa-moon"></i>
  </button>

  <script>
  const graduationDate = new Date("2026-05-29T10:00:00");
  const schoolStartDate = new Date("2025-07-28T00:00:00");
  const summerStartDate = new Date("2025-05-30T00:00:00");
  const summerEndDate = new Date("2025-07-28T00:00:00");

  const quips = [
    "Getting ready for the tassel flip...",
    "Senioritis loading in 3... 2... 1...",
    "College apps and coffee, anyone?",
    "Remember when 2026 felt forever away?",
    "Almost time to toss that cap!",
    "Is it too early to cry happy tears?",
    "Caps, gowns, and goodbyes coming soon.",
    "You've got this, Class of '26!",
    "Keep grindingâ€”freedom's near!",
    "Make it countâ€”these are the last laps!"
  ];

  const motivationalQuotes = [
    "Believe you can and you're halfway there.",
    "Every accomplishment starts with the decision to try.",
    "Don't watch the clock; do what it does. Keep going.",
    "Success is the sum of small efforts repeated day in and day out.",
    "Dream big. Work hard. Stay focused.",
    "The future belongs to those who believe in the beauty of their dreams.",
    "Push yourself, because no one else is going to do it for you.",
    "Mistakes are proof that you are trying.",
    "Success doesnâ€™t come from what you do occasionally, it comes from what you do consistently.",
    "Your limitationâ€”itâ€™s only your imagination."
  ];

  let currentMode = 'graduation'; // or 'summer'
  let quipIndex = 0;
  let hasCelebrated = false;
  let lastConfettiMinute = null;
  let manualTheme = null;

  // Helper to get full days between ignoring time-of-day issues
  function daysBetween(date1, date2) {
    const utc1 = Date.UTC(date1.getFullYear(), date1.getMonth(), date1.getDate());
    const utc2 = Date.UTC(date2.getFullYear(), date2.getMonth(), date2.getDate());
    const msPerDay = 24 * 60 * 60 * 1000;
    return Math.floor((utc2 - utc1) / msPerDay);
  }

  function updateCountdown() {
  const now = new Date();
  let targetDate, startDate, modeLabel;

  if (currentMode === 'graduation') {
    targetDate = graduationDate;
    startDate = schoolStartDate;
    modeLabel = "Graduation in";
  } else {
    targetDate = summerEndDate;
    startDate = summerStartDate;
    modeLabel = "Summer ends in";
  }

  // Strip times for days calculation to get full days left
  const nowDateOnly = new Date(now.getFullYear(), now.getMonth(), now.getDate());
  const targetDateOnly = new Date(targetDate.getFullYear(), targetDate.getMonth(), targetDate.getDate());

  const totalDays = Math.floor((targetDateOnly - nowDateOnly) / (1000 * 60 * 60 * 24));

  // Calculate hours, minutes, seconds left *today*
  const endOfDay = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1, 0, 0, 0);
  const msLeftToday = endOfDay - now;
  const hours = Math.floor(msLeftToday / (1000 * 60 * 60));
  const minutes = Math.floor((msLeftToday % (1000 * 60 * 60)) / (1000 * 60));
  const seconds = Math.floor((msLeftToday % (1000 * 60)) / 1000);

  // Display countdown
  const totalSeconds = Math.floor((targetDate - now) / 1000);
  document.getElementById("mode-title").textContent = totalSeconds > 0 ? modeLabel : "ðŸŽ‰ It's time!";
  if (totalSeconds > 0) {
    document.getElementById("countdown").textContent = `${totalDays}d ${hours}h ${minutes}m ${seconds}s`;
  } else {
    document.getElementById("countdown").textContent = "ðŸŽ“ Congratulations!";
  }

  // Confetti logic stays the same
  if (totalSeconds > 0 && seconds === 0 && lastConfettiMinute !== minutes) {
    confetti({ particleCount: 150, spread: 100, origin: { y: 0.6 } });
    lastConfettiMinute = minutes;
  } else if (totalSeconds <= 0 && !hasCelebrated) {
    confetti({ particleCount: 300, spread: 120, origin: { y: 0.6 } });
    hasCelebrated = true;
  }

  // Progress bar update (unchanged)
  const totalDuration = targetDate - startDate;
  const timeElapsed = now - startDate;
  let progressPercent = Math.min(100, Math.max(0, (timeElapsed / totalDuration) * 100));
  document.getElementById("progress-bar").style.width = `${progressPercent.toFixed(2)}%`;
  document.getElementById("progress-percent").textContent = `${progressPercent.toFixed(1)}% complete`;
}
    // Confetti logic
    if (totalSeconds > 0 && seconds === 0 && lastConfettiMinute !== minutes) {
      confetti({ particleCount: 150, spread: 100, origin: { y: 0.6 } });
      lastConfettiMinute = minutes;
    } else if (totalSeconds <= 0 && !hasCelebrated) {
      confetti({ particleCount: 300, spread: 120, origin: { y: 0.6 } });
      hasCelebrated = true;
    }

    // Progress percent calculation
    const totalDuration = targetDate - startDate;
    const timeElapsed = now - startDate;

    let progressPercent = 0;
    if (now < startDate) {
      progressPercent = 0;
    } else if (now > targetDate) {
      progressPercent = 100;
    } else {
      progressPercent = (timeElapsed / totalDuration) * 100;
    }
    progressPercent = Math.min(100, Math.max(0, progressPercent));

    document.getElementById("progress-bar").style.width = `${progressPercent.toFixed(2)}%`;
    document.getElementById("progress-percent").textContent = `${progressPercent.toFixed(1)}% complete`;
  }

  function rotateQuip() {
    const quipEl = document.getElementById("quip");
    quipEl.style.opacity = 0;
    setTimeout(() => {
      quipEl.textContent = quips[quipIndex];
      quipEl.style.opacity = 1;
      quipIndex = (quipIndex + 1) % quips.length;
    }, 800);
  }

  function updateDailyQuote() {
    const now = new Date();
    const startOfYear = new Date(now.getFullYear(), 0, 0);
    const diff = now - startOfYear;
    const oneDay = 1000 * 60 * 60 * 24;
    const dayOfYear = Math.floor(diff / oneDay);
    const quote = motivationalQuotes[dayOfYear % motivationalQuotes.length];
    const quoteEl = document.getElementById('daily-quote');
    quoteEl.style.opacity = 0;
    setTimeout(() => {
      quoteEl.textContent = `"${quote}"`;
      quoteEl.style.opacity = 1;
    }, 800);
  }

  function applyTheme() {
    const body = document.body;
    if (manualTheme) {
      body.className = manualTheme === 'day' ? 'day-theme' : 'night-theme';
    } else {
      const hour = new Date().getHours();
      body.className = hour >= 6 && hour < 18 ? 'day-theme' : 'night-theme';
    }
  }

  // Initialize theme to dark by default
  manualTheme = 'night';
  applyTheme();

  // Toggle theme with FontAwesome icons
  const themeToggle = document.getElementById("theme-toggle");
  themeToggle.innerHTML = '<i id="theme-icon" class="fa fa-moon"></i>';
  themeToggle.style.position = 'fixed';
  themeToggle.style.bottom = '15px';
  themeToggle.style.left = '15px';
  themeToggle.style.borderRadius = '50%';
  themeToggle.style.width = '48px';
  themeToggle.style.height = '48px';
  themeToggle.style.padding = '0';
  themeToggle.style.backgroundColor = '#42a5f5';
  themeToggle.style.display = 'flex';
  themeToggle.style.alignItems = 'center';
  themeToggle.style.justifyContent = 'center';
  themeToggle.style.boxShadow = '0 4px 10px rgba(66,165,245,0.5)';
  themeToggle.style.cursor = 'pointer';

  themeToggle.addEventListener("click", () => {
    manualTheme = manualTheme === 'day' ? 'night' : 'day';
    applyTheme();
    const icon = document.getElementById('theme-icon');
    if (manualTheme === 'day') {
      icon.className = 'fa fa-sun';
      themeToggle.style.backgroundColor = '#1976d2';
    } else {
      icon.className = 'fa fa-moon';
      themeToggle.style.backgroundColor = '#42a5f5';
    }
  });

  document.getElementById("mode-toggle").addEventListener("click", () => {
    currentMode = currentMode === 'graduation' ? 'summer' : 'graduation';
    hasCelebrated = false;
    updateCountdown();
  });

  // Initial setup
  updateCountdown();
  rotateQuip();
  updateDailyQuote();

  // Intervals
  setInterval(updateCountdown, 1000);
  setInterval(rotateQuip, 10000);

  // Update daily quote once a day at midnight
  function scheduleDailyQuoteUpdate() {
    const now = new Date();
    const msUntilMidnight = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1) - now;
    setTimeout(() => {
      updateDailyQuote();
      scheduleDailyQuoteUpdate();
    }, msUntilMidnight);
  }
  scheduleDailyQuoteUpdate();
</script>
</body>
</html>