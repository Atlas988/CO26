<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Class of 2026</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Roboto&display=swap');
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      font-family: 'Roboto', sans-serif;
      background-color: #121212;
      color: #e0e0e0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      transition: background-color 0.3s, color 0.3s;
    }

    .card {
      background-color: #1e1e1e;
      border-radius: 16px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5);
      padding: 2rem;
      max-width: 400px;
      text-align: center;
    }

    h1 {
      margin-bottom: 0.3em;
    }

    .countdown {
      font-size: 1.8rem;
      margin-bottom: 0.5em;
      min-height: 2.5em;
    }

    .quips {
      font-style: italic;
      color: yellow;
      margin-bottom: 1.5em;
      min-height: 1.8em;
    }

    progress {
      width: 100%;
      height: 20px;
      border-radius: 10px;
      appearance: none;
      background-color: #333;
      margin-bottom: 0.5em;
    }

    progress::-webkit-progress-bar {
      background-color: #333;
      border-radius: 10px;
    }

    progress::-webkit-progress-value {
      background-color: #64b5f6;
      border-radius: 10px;
    }

    progress::-moz-progress-bar {
      background-color: #64b5f6;
      border-radius: 10px;
    }

    .percentage {
      font-size: 1rem;
      margin-bottom: 1rem;
    }

    .theme-toggle {
      position: fixed;
      bottom: 1rem;
      left: 1rem;
      background-color: #1e88e5;
      border: none;
      border-radius: 50%;
      width: 48px;
      height: 48px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      cursor: pointer;
      font-size: 1.2rem;
      transition: background-color 0.3s;
    }

    .theme-toggle:hover {
      background-color: #1565c0;
    }

    body.light {
      background-color: #f5f5f5;
      color: #202020;
    }

    body.light .card {
      background-color: #ffffff;
    }

    body.light .quips {
      color: #d4aa00;
    }

    body.light progress {
      background-color: #ddd;
    }

    body.light progress::-webkit-progress-bar {
      background-color: #ddd;
    }

    body.light progress::-webkit-progress-value {
      background-color: #1976d2;
    }

    body.light progress::-moz-progress-bar {
      background-color: #1976d2;
    }

    body.light .theme-toggle {
      background-color: #1976d2;
    }

    canvas.confetti-canvas {
      position: fixed;
      pointer-events: none;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }
  </style>
</head>
<body>
  <div class="card">
    <h1>Class of 2026</h1>
    <div class="countdown" id="countdown">Loading...</div>
    <progress id="progressBar" value="0" max="100"></progress>
    <div class="percentage" id="percentDisplay">0%</div>
    <div class="quips" id="quips"></div>
  </div>

  <button class="theme-toggle" id="toggleThemeBtn">
    <i class="fas fa-moon"></i>
  </button>

  <canvas class="confetti-canvas" id="confettiCanvas"></canvas>

  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script>
    const countdownEl = document.getElementById('countdown');
    const progressBar = document.getElementById('progressBar');
    const percentDisplay = document.getElementById('percentDisplay');
    const quipsEl = document.getElementById('quips');
    const toggleThemeBtn = document.getElementById('toggleThemeBtn');
    const confettiCanvas = document.getElementById('confettiCanvas');
    const myConfetti = confetti.create(confettiCanvas, { resize: true, useWorker: true });

    const quips = [
      "Getting ready for the tassel flip...",
      "Senioritis loading in 3... 2... 1...",
      "Caps, gowns, and goodbyes coming soon.",
      "You've got this, Class of '26!",
      "Final countdown: make it legendary!",
      "Stay focused, finish strong!",
      "Turn those late nights into bright futures.",
      "One step closer to the stage!",
      "Late nights today, bright days tomorrow.",
      "Countdown to memories that last forever."
    ];

    const gradDate = new Date(2026, 4, 29);
    const schoolStart = new Date(2025, 6, 28);
    let lastMinute = null;
    let exploded = false;

    function pad(n) {
      return n.toString().padStart(2, '0');
    }

    function updateCountdown() {
      const now = new Date();
      let diff = gradDate - now;

      if (diff <= 0) {
        countdownEl.textContent = "ðŸŽ“ Congratulations, Class of 2026!";
        progressBar.value = 100;
        percentDisplay.textContent = "100%";
        if (!exploded) {
          explodeConfetti();
          exploded = true;
        }
        return;
      }

      const days = Math.floor(diff / (1000 * 60 * 60 * 24));
      diff -= days * (1000 * 60 * 60 * 24);
      const hours = Math.floor(diff / (1000 * 60 * 60));
      diff -= hours * (1000 * 60 * 60);
      const minutes = Math.floor(diff / (1000 * 60));
      diff -= minutes * (1000 * 60);
      const seconds = Math.floor(diff / 1000);

      countdownEl.textContent = `${days}d ${pad(hours)}h ${pad(minutes)}m ${pad(seconds)}s`;

      // Progress
      const totalDuration = gradDate - schoolStart;
      const elapsed = now - schoolStart;
      let percent = (elapsed / totalDuration) * 100;
      if (percent < 0) percent = 0;
      if (percent > 100) percent = 100;

      progressBar.value = percent;
      percentDisplay.textContent = `${percent.toFixed(1)}%`;

      // Minute confetti
      if (lastMinute !== minutes) {
        lastMinute = minutes;
        triggerConfetti();
      }
    }

    function triggerConfetti() {
      myConfetti({
        particleCount: 150,
        spread: 90,
        origin: { y: 0 },
        gravity: 0.9,
        ticks: 300,
      });
    }

    function explodeConfetti() {
      myConfetti({
        particleCount: 1000,
        spread: 160,
        origin: { y: 0.3 },
        startVelocity: 60,
        gravity: 0.8,
        ticks: 400,
      });
    }

    function showQuip() {
      const index = Math.floor(Math.random() * quips.length);
      quipsEl.textContent = quips[index];
    }

    function setTheme(dark) {
      if (dark) {
        document.body.classList.remove('light');
        toggleThemeBtn.innerHTML = '<i class="fas fa-moon"></i>';
      } else {
        document.body.classList.add('light');
        toggleThemeBtn.innerHTML = '<i class="fas fa-sun"></i>';
      }
      localStorage.setItem('darkTheme', dark ? 'true' : 'false');
    }

    toggleThemeBtn.addEventListener('click', () => {
      const dark = !document.body.classList.contains('light');
      setTheme(!dark);
    });

    // Initialize theme
    const savedTheme = localStorage.getItem('darkTheme');
    if (savedTheme === 'false') {
      setTheme(false);
    } else {
      setTheme(true);
    }

    updateCountdown();
    showQuip();
    setInterval(updateCountdown, 1000);
    setInterval(showQuip, 6000);
  </script>
</body>
</html>