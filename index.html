<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Class of 2026 Countdown</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <style>
    body {
      font-family: 'Roboto', sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      transition: background 0.5s, color 0.5s;
      background-color: #121212;
      color: #eee;
      flex-direction: column;
      padding: 1rem;
    }
    .card {
      padding: 2rem;
      border-radius: 12px;
      max-width: 550px;
      text-align: center;
      background: #1e1e1e;
      box-shadow: 0 8px 20px rgba(0,0,0,0.6);
      width: 100%;
      max-width: 600px;
      position: relative;
    }
    .time {
      font-size: 2.8rem;
      font-weight: 700;
      color: #90caf9;
      transition: color 0.5s;
    }
    .quip {
      font-size: 1.3rem;
      margin-top: 1rem;
      font-style: italic;
      opacity: 1;
      transition: opacity 0.8s ease;
      min-height: 40px;
      color: #fbc02d;
    }
    .progress-container {
      margin-top: 2rem;
      text-align: left;
    }
    .progress-label {
      font-weight: bold;
      margin-bottom: 0.5rem;
      color: #90caf9;
      transition: color 0.5s;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 1rem;
    }
    .progress-mode-label {
      font-style: italic;
      font-weight: 400;
      font-size: 0.9rem;
      color: #fbc02d;
    }
    .progress {
      background-color: #333;
      border-radius: 20px;
      overflow: hidden;
      height: 20px;
    }
    .determinate {
      background-color: #42a5f5;
      height: 100%;
      width: 0;
      transition: width 1.5s ease-out;
    }
    body.day-theme {
      background-color: #f5f5f5;
      color: #333;
    }
    body.day-theme .card {
      background: white;
      box-shadow: 0 8px 20px rgba(0,0,0,0.2);
    }
    body.day-theme .time {
      color: #1976d2;
    }
    body.day-theme .progress-label {
      color: #1976d2;
    }
    body.day-theme .progress-mode-label {
      color: #fbc02d;
    }
    body.day-theme .progress {
      background-color: #eee;
    }
    body.day-theme .determinate {
      background-color: #1976d2;
    }
    body.night-theme {
      background-color: #121212;
      color: #eee;
    }
    body.night-theme .card {
      background: #1e1e1e;
    }
    body.night-theme .time {
      color: #90caf9;
    }
    body.night-theme .progress-label {
      color: #90caf9;
    }
    body.night-theme .progress-mode-label {
      color: #fbc02d;
    }
    body.night-theme .progress {
      background-color: #333;
    }
    body.night-theme .determinate {
      background-color: #42a5f5;
    }
    #theme-toggle, #mode-toggle, #progress-mode-toggle {
      margin-top: 15px;
      padding: 10px 20px;
      font-size: 1rem;
      border: none;
      border-radius: 25px;
      background-color: #42a5f5;
      color: white;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(66,165,245,0.5);
      transition: background-color 0.3s ease;
      margin-right: 10px;
    }
    #theme-toggle:hover, #mode-toggle:hover, #progress-mode-toggle:hover {
      background-color: #1e88e5;
    }
    #daily-quote {
      margin-top: 20px;
      font-style: normal;
      font-weight: 600;
      font-size: 1.1rem;
      max-width: 600px;
      text-align: center;
      color: #fbc02d;
      text-shadow: 0 0 8px rgba(251, 192, 45, 0.7);
      min-height: 44px;
      transition: opacity 0.8s ease;
    }
    .button-row {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
      margin-top: 10px;
    }
  </style>
</head>
<body class="night-theme">
  <div class="card z-depth-3" role="main" aria-live="polite">
    <h4 id="mode-title">Graduation in</h4>
    <div class="time" id="countdown" aria-label="Countdown timer">Loading...</div>
    <div class="quip" id="quip">Getting ready for the tassel flip...</div>
    <div class="progress-container" aria-label="Progress bar container">
      <div class="progress-label" id="progress-label">
        <span id="progress-percent">0% complete</span>
        <span class="progress-mode-label" id="progress-mode-label">Full High School</span>
      </div>
      <div class="progress" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
        <div class="determinate" id="progress-bar" style="width: 0%"></div>
      </div>
    </div>
  </div>

  <div class="button-row">
    <button id="mode-toggle" aria-pressed="false">Toggle Mode</button>
    <button id="progress-mode-toggle" aria-pressed="false">Toggle Progress Mode</button>
    <button id="theme-toggle" aria-pressed="false">Toggle Theme</button>
  </div>

  <div id="daily-quote" aria-live="polite"></div>

  <script>
    // Dates
    const graduationDate = new Date("2026-05-29T10:00:00");
    const schoolStartDate2022 = new Date("2022-07-28T00:00:00");
    const schoolStartDate2025 = new Date("2025-07-28T00:00:00");
    const summerStartDate = new Date("2025-05-30T00:00:00");
    const summerEndDate = new Date("2025-07-28T00:00:00");

    // Texts
    const quips = [
      "Getting ready for the tassel flip...",
      "Senioritis loading in 3... 2... 1...",
      "College apps and coffee, anyone?",
      "Remember when 2026 felt forever away?",
      "Almost time to toss that cap!",
      "Is it too early to cry happy tears?",
      "Caps, gowns, and goodbyes coming soon.",
      "You've got this, Class of '26!",
      "Keep grindingâ€”freedom's near!",
      "Make it countâ€”these are the last laps!"
    ];

    const motivationalQuotes = [
      "Believe you can and you're halfway there.",
      "Every accomplishment starts with the decision to try.",
      "Don't watch the clock; do what it does. Keep going.",
      "Success is the sum of small efforts repeated day in and day out.",
      "Dream big. Work hard. Stay focused.",
      "The future belongs to those who believe in the beauty of their dreams.",
      "Push yourself, because no one else is going to do it for you.",
      "Mistakes are proof that you are trying.",
      "Success doesnâ€™t come from what you do occasionally, it comes from what you do consistently.",
      "Your limitationâ€”itâ€™s only your imagination."
    ];

    // State variables
    let currentMode = 'graduation'; // or 'summer'
    let progressMode = 'fullHighSchool'; // 'fullHighSchool' or 'seniorYear'
    let quipIndex = 0;
    let hasCelebrated = false;
    let lastConfettiMinute = null;
    let manualTheme = null;

    function updateCountdown() {
      const now = new Date();
      let targetDate, startDate, modeLabel;

      if (currentMode === 'graduation') {
        targetDate = graduationDate;
        modeLabel = "Graduation in";
        startDate = (progressMode === 'fullHighSchool') ? schoolStartDate2022 : schoolStartDate2025;
      } else {
        targetDate = summerEndDate;
        startDate = summerStartDate;
        modeLabel = "Summer ends in";
      }

      const totalSeconds = Math.floor((targetDate - now) / 1000);
      const days = Math.floor(totalSeconds / (3600 * 24));
      const hours = Math.floor((totalSeconds % (3600 * 24)) / 3600);
      const minutes = Math.floor((totalSeconds % 3600) / 60);
      const seconds = totalSeconds % 60;

      document.getElementById("mode-title").textContent = totalSeconds > 0 ? modeLabel : "ðŸŽ‰ It's time!";
      document.getElementById("countdown").textContent = totalSeconds > 0
        ? `${days}d ${hours}: `${days}d ${hours}h ${minutes}m ${seconds}s`
        : "ðŸŽ‰ Congratulations!";

      // Progress calculation (only for graduation mode)
      let progressPercent = 0;
      if (currentMode === 'graduation') {
        const totalDuration = targetDate - startDate;
        const elapsed = now - startDate;
        progressPercent = Math.min(100, Math.max(0, (elapsed / totalDuration) * 100));
        document.getElementById("progress-mode-label").textContent =
          (progressMode === 'fullHighSchool') ? "Full High School" : "Senior Year";
      } else {
        // Summer mode has no progress bar, reset to 0%
        progressPercent = 0;
        document.getElementById("progress-mode-label").textContent = "";
      }

      // Update progress bar and aria
      const progressBar = document.getElementById("progress-bar");
      progressBar.style.width = progressPercent + "%";
      const progressPercentLabel = document.getElementById("progress-percent");
      progressPercentLabel.textContent = Math.floor(progressPercent) + "% complete";
      progressBar.parentElement.setAttribute("aria-valuenow", Math.floor(progressPercent));

      // Confetti once every full minute when countdown is active and remaining time > 0
      if (totalSeconds > 0) {
        const currentMinute = now.getMinutes();
        if (currentMinute !== lastConfettiMinute) {
          launchConfetti();
          lastConfettiMinute = currentMinute;
        }
      }

      // Quip rotation every 10 seconds
      if (!quipTimer) {
        quipTimer = setInterval(() => {
          quipIndex = (quipIndex + 1) % quips.length;
          const quipElem = document.getElementById("quip");
          quipElem.style.opacity = 0;
          setTimeout(() => {
            quipElem.textContent = quips[quipIndex];
            quipElem.style.opacity = 1;
          }, 800);
        }, 10000);
      }
    }

    function launchConfetti() {
      const duration = 3000;
      const end = Date.now() + duration;

      (function frame() {
        confetti({
          particleCount: 5,
          angle: 60,
          spread: 55,
          origin: { x: 0 },
          colors: ['#fbc02d', '#42a5f5', '#90caf9']
        });
        confetti({
          particleCount: 5,
          angle: 120,
          spread: 55,
          origin: { x: 1 },
          colors: ['#fbc02d', '#42a5f5', '#90caf9']
        });

        if (Date.now() < end) {
          requestAnimationFrame(frame);
        }
      })();
    }

    // Mode toggle between graduation and summer countdown
    document.getElementById("mode-toggle").addEventListener("click", () => {
      currentMode = currentMode === 'graduation' ? 'summer' : 'graduation';
      hasCelebrated = false;
      quipIndex = 0;
      document.getElementById("quip").textContent = quips[quipIndex];
      updateCountdown();
    });

    // Progress mode toggle between full HS and senior year (only if graduation mode active)
    document.getElementById("progress-mode-toggle").addEventListener("click", () => {
      if (currentMode === 'graduation') {
        progressMode = (progressMode === 'fullHighSchool') ? 'seniorYear' : 'fullHighSchool';
        updateCountdown();
      }
    });

    // Theme toggle between night and day
    document.getElementById("theme-toggle").addEventListener("click", () => {
      if (document.body.classList.contains("night-theme")) {
        document.body.classList.replace("night-theme", "day-theme");
      } else {
        document.body.classList.replace("day-theme", "night-theme");
      }
    });

    // Initial quip timer variable
    let quipTimer = null;

    // Initialize on page load
    updateCountdown();
    setInterval(updateCountdown, 1000);

  </script>
</body>
</html>