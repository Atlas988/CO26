<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Class of 2026 Countdown</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Roboto&display=swap');
  :root {
    --primary-dark: #64b5f6;
    --primary-light: #1976d2;
    --bg-dark: #121212;
    --bg-light: #f5f5f5;
    --text-dark: #e0e0e0;
    --text-light: #202020;
    --card-bg-dark: #1e1e1e;
    --card-bg-light: #ffffff;
  }
  body {
    margin: 0;
    font-family: 'Roboto', sans-serif;
    background-color: var(--bg-dark);
    color: var(--text-dark);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    min-height: 100vh;
    padding: 2rem 1rem 3rem;
    transition: background-color 0.3s, color 0.3s;
  }
  body.light {
    background-color: var(--bg-light);
    color: var(--text-light);
  }
  body.custom {
    background-color: #0d47a1;
    color: #e3f2fd;
  }
  h1 {
    margin-bottom: 0.3em;
    font-weight: 500;
  }
  .card {
    background-color: var(--card-bg-dark);
    padding: 1.5rem 2rem;
    border-radius: 12px;
    box-shadow: 0 3px 10px rgba(0,0,0,0.4);
    max-width: 400px;
    width: 100%;
    text-align: center;
    transition: background-color 0.3s, color 0.3s;
    user-select: none;
  }
  body.light .card {
    background-color: var(--card-bg-light);
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }
  body.custom .card {
    background-color: #1565c0;
    box-shadow: 0 3px 10px rgba(0,0,0,0.3);
  }
  .countdown {
    font-size: 2rem;
    margin: 1rem 0 0.5rem;
    min-height: 2.5em;
    font-weight: 600;
  }
  progress {
    width: 100%;
    height: 20px;
    border-radius: 10px;
    appearance: none;
    -webkit-appearance: none;
    background-color: #333;
    margin-bottom: 1.5rem;
    transition: background-color 0.3s;
  }
  progress::-webkit-progress-bar {
    background-color: #333;
    border-radius: 10px;
  }
  progress::-webkit-progress-value {
    background-color: var(--primary-dark);
    border-radius: 10px;
    transition: width 0.5s ease;
  }
  progress::-moz-progress-bar {
    background-color: var(--primary-dark);
    border-radius: 10px;
  }
  body.light progress {
    background-color: #ddd;
  }
  body.light progress::-webkit-progress-bar {
    background-color: #ddd;
  }
  body.light progress::-webkit-progress-value {
    background-color: var(--primary-light);
  }
  body.light progress::-moz-progress-bar {
    background-color: var(--primary-light);
  }
  body.custom progress {
    background-color: #0d47a1;
  }
  body.custom progress::-webkit-progress-bar {
    background-color: #0d47a1;
  }
  body.custom progress::-webkit-progress-value {
    background-color: #82b1ff;
  }
  body.custom progress::-moz-progress-bar {
    background-color: #82b1ff;
  }
  .quips {
    font-style: italic;
    margin: 0.5em 0 2em 0;
    min-height: 2em;
    color: var(--primary-dark);
    font-weight: 500;
    user-select: none;
  }
  body.light .quips {
    color: var(--primary-light);
  }
  body.custom .quips {
    color: #bbdefb;
  }
  /* Buttons container */
  .btn-group {
    display: flex;
    justify-content: center;
    gap: 12px;
    flex-wrap: wrap;
  }
  button, select {
    background-color: var(--primary-dark);
    border: none;
    border-radius: 6px;
    color: white;
    padding: 0.6em 1.2em;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.3s;
    user-select: none;
    font-size: 1rem;
  }
  button:hover, select:hover {
    background-color: var(--primary-light);
  }
  body.light button, body.light select {
    background-color: var(--primary-light);
    color: white;
  }
  body.light button:hover, body.light select:hover {
    background-color: var(--primary-dark);
  }
  body.custom button, body.custom select {
    background-color: #82b1ff;
    color: #0d47a1;
  }
  body.custom button:hover, body.custom select:hover {
    background-color: #bbdefb;
  }
  /* Share buttons smaller on mobile */
  @media (max-width: 400px) {
    button, select {
      flex: 1 1 100%;
    }
  }
  /* Swipe instructions for mobile */
  .swipe-info {
    font-size: 0.9rem;
    color: var(--primary-dark);
    margin-bottom: 1rem;
    user-select: none;
  }
  body.light .swipe-info {
    color: var(--primary-light);
  }
  body.custom .swipe-info {
    color: #bbdefb;
  }
</style>
</head>
<body>

<h1>Class of 2026 Countdown</h1>
<div class="card" id="card" role="region" aria-live="polite" aria-atomic="true">

  <div class="countdown" id="countdown">Loading...</div>
  <progress id="progressBar" value="0" max="100" aria-label="Progress towards graduation"></progress>
  <div class="quips" id="quips">Loading quip...</div>

  <div class="swipe-info" id="swipeInfo">Swipe quips ‚Üê ‚Üí on mobile</div>

  <div class="btn-group" role="group" aria-label="Controls">
    <button id="addCalendarBtn" aria-label="Add graduation date to calendar">Add to Calendar</button>
    <button id="shareTwitter" aria-label="Share countdown on Twitter">Share Twitter</button>
    <button id="shareFacebook" aria-label="Share countdown on Facebook">Share Facebook</button>
    <button id="copyText" aria-label="Copy countdown text">Copy Text</button>
  </div>

  <div style="margin-top:1rem;">
    <label for="themeSelect" style="font-weight:600;">Select Theme:</label>
    <select id="themeSelect" aria-label="Select theme">
      <option value="dark">Dark</option>
      <option value="light">Light</option>
      <option value="custom">Custom Blue</option>
    </select>
  </div>

</div>

<script>
(() => {
  const countdownEl = document.getElementById('countdown');
  const progressBar = document.getElementById('progressBar');
  const quipsEl = document.getElementById('quips');
  const addCalendarBtn = document.getElementById('addCalendarBtn');
  const shareTwitterBtn = document.getElementById('shareTwitter');
  const shareFacebookBtn = document.getElementById('shareFacebook');
  const copyTextBtn = document.getElementById('copyText');
  const themeSelect = document.getElementById('themeSelect');
  const swipeInfo = document.getElementById('swipeInfo');

  const quips = [
    "Getting ready for the tassel flip...",
    "Senioritis loading in 3... 2... 1...",
    "College apps and coffee, anyone?",
    "Remember when 2026 felt forever away?",
    "Almost time to toss that cap!",
    "Is it too early to cry happy tears?",
    "Caps, gowns, and goodbyes coming soon.",
    "You've got this, Class of '26!",
    "Keep grinding‚Äîfreedom's near!",
    "Make it count‚Äîthese are the last laps!",
    "Dream big, work hard, graduate proud!",
    "Every day is a step closer to glory.",
    "The tassle‚Äôs worth the hassle!",
    "Books today, success tomorrow.",
    "Final countdown: make it legendary!",
    "Almost there, no time to slack!",
    "Senior year vibes: hustle and heart.",
    "Turn those late nights into bright futures.",
    "Stay focused, finish strong!",
    "One step closer to the stage!"
  ];

  const gradDate = new Date(2026, 4, 29);
  const schoolStart = new Date(2025, 6, 28);

  function pad(n) {
    return n.toString().padStart(2, '0');
  }

  function update() {
    const now = new Date();
    let diff = gradDate - now;

    if (diff <= 0) {
      countdownEl.textContent = "üéì Congratulations, Class of 2026! üéâ";
      progressBar.value = 100;
      return;
    }

    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
    diff -= days * (1000 * 60 * 60 * 24);
    const hours = Math.floor(diff / (1000 * 60 * 60));
    diff -= hours * (1000 * 60 * 60);
    const minutes = Math.floor(diff / (1000 * 60));
    diff -= minutes * (1000 * 60);
    const seconds = Math.floor(diff / 1000);

    countdownEl.textContent = `${days}d ${pad(hours)}h ${pad(minutes)}m ${pad(seconds)}s`;

    const totalDuration = gradDate - schoolStart;
    const elapsed = now - schoolStart;
    let percent = (elapsed / totalDuration) * 100;
    percent = Math.min(Math.max(percent, 0), 100);
    progressBar.value = percent;
  }

  // Quips and swipe support
  let quipIndex = 0;
  function showQuip(index) {
    quipIndex = (index + quips.length) % quips.length;
    quipsEl.textContent = quips[quipIndex];
  }

  let autoRotateInterval;

  function startAutoRotate() {
    autoRotateInterval = setInterval(() => {
      showQuip(quipIndex + 1);
    }, 6000);
  }

  function stopAutoRotate() {
    clearInterval(autoRotateInterval);
  }

  let touchStartX = 0;
  let touchEndX = 0;

  function handleGesture() {
    const swipeThreshold = 50;
    if (touchEndX + swipeThreshold < touchStartX) {
      showQuip(quipIndex + 1);
    }
    if (touchEndX - swipeThreshold > touchStartX) {
      showQuip(quipIndex - 1);
    }
  }

  if ('ontouchstart' in window) {
    swipeInfo.style.display = 'block';
    quipsEl.addEventListener('touchstart', e => {
      stopAutoRotate();
      touchStartX = e.changedTouches[0].screenX;
    });
    quipsEl.addEventListener('touchend', e => {
      touchEndX = e.changedTouches[0].screenX;
      handleGesture();
      startAutoRotate();
    });
  } else {
    swipeInfo.style.display = 'none';
    startAutoRotate();
  }

  addCalendarBtn.addEventListener('click', () => {
    const title = encodeURIComponent("Class of 2026 Graduation");
    const details = encodeURIComponent("Celebrate the Class of 2026 graduation day!");
    const location = encodeURIComponent("Your School Location");
    const start = "20260529T000000";
    const end = "20260529T235959";

    const googleCalUrl = `https://calendar.google.com/calendar/r/eventedit?text=${title}&dates=${start}/${end}&details=${details}&location=${location}`;

    const icsContent = 
`BEGIN:VCALENDAR
VERSION:2.0
BEGIN:VEVENT
SUMMARY:Class of 2026 Graduation
DTSTART:${start}
DTEND:${end}
DESCRIPTION:Celebrate the Class of 2026 graduation day!
LOCATION:Your School Location
END:VEVENT
END:VCALENDAR`;

    const blob = new Blob([icsContent], {type: 'text/calendar'});
    const icsUrl = URL.createObjectURL(blob);

    if (confirm("Add to Google Calendar? (OK = Google Calendar, Cancel = Download .ics file)")) {
      window.open(googleCalUrl, '_blank');
    } else {
      const a = document.createElement('a');
      a.href = icsUrl;
      a.download = 'class_of_2026_graduation.ics';
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(icsUrl);
    }
  });

  shareTwitterBtn.addEventListener('click', () => {
    const text = encodeURIComponent("Counting down to Class of 2026 Graduation! üéì #ClassOf2026");
    const url = encodeURIComponent(window.location.href);
    const twitterUrl = `https://twitter.com/intent/tweet?text=${text}&url=${url}`;
    window.open(twitterUrl, '_blank');
  });

  shareFacebookBtn.addEventListener('click', () => {
    const url = encodeURIComponent(window.location.href);
    const facebookUrl = `https://www.facebook.com/sharer/sharer.php?u=${url}`;
    window.open(facebookUrl, '_blank');
  });

  copyTextBtn.addEventListener('click', () => {
    const text = countdownEl.textContent + " ‚Äî Class of 2026 Graduation Countdown!";
    navigator.clipboard.writeText(text).then(() => {
      alert('Countdown text copied to clipboard!');
    }).catch(() => alert('Failed to copy text.'));
  });

  function applyTheme(theme) {
    document.body.classList.remove('light', 'custom');
    if (theme === 'light') {
      document.body.classList.add('light');
    } else if (theme === 'custom') {
      document.body.classList.add('custom');
    }
    localStorage.setItem('theme', theme);
  }

  themeSelect.addEventListener('change', (e) => {
    applyTheme(e.target.value);
  });

  // Load saved theme or default to dark
  const savedTheme = localStorage.getItem('theme') || 'dark';
  applyTheme(savedTheme);
  themeSelect.value = savedTheme;

  // Initial update & interval
  update();
  setInterval(update, 1000);
  showQuip(quipIndex);
})();
</script>

</body>
</html>