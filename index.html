<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Class of 2026 Countdown</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <style>
    body {
      font-family: 'Roboto', sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      transition: background 0.5s, color 0.5s;
    }
    .card {
      padding: 2rem;
      border-radius: 12px;
      max-width: 550px;
      text-align: center;
    }
    .time {
      font-size: 2.5rem;
      font-weight: 700;
      color: #1976d2;
    }
    .quip {
      font-size: 1.2rem;
      margin-top: 1rem;
      font-style: italic;
    }
    .progress-container {
      margin-top: 2rem;
    }
    .progress-label {
      font-weight: bold;
      margin-bottom: 0.5rem;
    }
    .milestones {
      display: flex;
      justify-content: space-between;
      font-size: 0.9rem;
      margin-top: 5px;
    }
    .school-days {
      margin-top: 1.5rem;
      font-weight: bold;
    }
    .day-theme {
      background-color: #f5f5f5;
      color: #333;
    }
    .day-theme .card {
      background: white;
    }
    .night-theme {
      background-color: #121212;
      color: #eee;
    }
    .night-theme .card {
      background: #1e1e1e;
    }
    .night-theme .time {
      color: #90caf9;
    }
    .night-theme .progress {
      background-color: #333;
    }
    .night-theme .determinate {
      background-color: #42a5f5;
    }
  </style>
</head>
<body>
  <div class="card z-depth-3">
    <h4>Countdown to Class of 2026 Graduation</h4>
    <div class="time" id="countdown">Loading...</div>
    <div class="quip" id="quip">Getting ready for the tassel flip...</div>

    <!-- Grade Selector -->
    <div class="input-field" style="margin-top: 1rem;">
      <select id="gradeSelect">
        <option value="2022-07-28">Freshman</option>
        <option value="2023-07-28">Sophomore</option>
        <option value="2024-07-28">Junior</option>
        <option value="2025-07-28" selected>Senior</option>
      </select>
      <label>Select Your Grade Level</label>
    </div>
    <div class="school-days" id="schoolDaysLeft">School days left: ...</div>

    <!-- Progress Bar -->
    <div class="progress-container">
      <div class="progress-label" id="progress-percent">0% complete</div>
      <div class="progress">
        <div class="determinate" id="progress-bar" style="width: 0%"></div>
      </div>
      <div class="milestones">
        <span>ðŸŸ¢ Freshman</span>
        <span>ðŸ”µ Sophomore</span>
        <span>ðŸŸ£ Junior</span>
        <span>ðŸ”´ Senior</span>
      </div>
    </div>
  </div>

  <script>
    const graduationDate = new Date("2026-05-29T10:00:00");
    const quips = [
      "Getting ready for the tassel flip...",
      "Senioritis loading in 3... 2... 1...",
      "College apps and coffee, anyone?",
      "Remember when 2026 felt forever away?",
      "Almost time to toss that cap!",
      "Is it too early to cry happy tears?",
      "Caps, gowns, and goodbyes coming soon.",
      "You've got this, Class of '26!",
      "Keep grindingâ€”freedom's near!",
      "Make it countâ€”these are the last laps!"
    ];

    let quipIndex = 0;
    let hasCelebrated = false;

    function updateCountdown() {
      const now = new Date();
      const totalSeconds = Math.floor((graduationDate - now) / 1000);

      const days = Math.floor(totalSeconds / (3600 * 24));
      const hours = Math.floor((totalSeconds % (3600 * 24)) / 3600);
      const minutes = Math.floor((totalSeconds % 3600) / 60);
      const seconds = totalSeconds % 60;

      const countdownEl = document.getElementById('countdown');
      if (totalSeconds > 0) {
        countdownEl.textContent = `${days}d ${hours}h ${minutes}m ${seconds}s`;
      } else {
        countdownEl.textContent = "ðŸŽ“ Congratulations, Class of 2026!";
        if (!hasCelebrated) {
          confetti({ particleCount: 300, spread: 120 });
          hasCelebrated = true;
        }
      }

      updateProgressBar(now);
      updateSchoolDays();
    }

    function updateProgressBar(currentDate) {
      const startDate = new Date("2022-07-28");
      const totalDuration = graduationDate - startDate;
      const timeElapsed = currentDate - startDate;
      const progressPercent = Math.min(100, Math.max(0, (timeElapsed / totalDuration) * 100));
      document.getElementById('progress-bar').style.width = progressPercent.toFixed(2) + "%";
      document.getElementById('progress-percent').textContent = progressPercent.toFixed(1) + "% complete";
    }

    function rotateQuip() {
      document.getElementById('quip').textContent = quips[quipIndex];
      quipIndex = (quipIndex + 1) % quips.length;
    }

    function applyTheme() {
      const hour = new Date().getHours();
      const isNight = hour < 6 || hour >= 18;
      document.body.classList.add(isNight ? 'night-theme' : 'day-theme');
    }

    function countSchoolDays(start, end) {
      let count = 0;
      let date = new Date(start);
      while (date <= end) {
        const day = date.getDay();
        if (day >= 1 && day <= 5) count++; // Mondayâ€“Friday only
        date.setDate(date.getDate() + 1);
      }
      return count;
    }

    function updateSchoolDays() {
      const selected = document.getElementById('gradeSelect').value;
      const start = new Date(selected);
      const now = new Date();
      const schoolStart = now > start ? now : start;
      const days = countSchoolDays(schoolStart, graduationDate);
      document.getElementById('schoolDaysLeft').textContent = `School days left: ${days}`;
    }

    applyTheme();
    updateCountdown();
    rotateQuip();
    setInterval(updateCountdown, 1000);
    setInterval(rotateQuip, 10000);

    document.addEventListener('DOMContentLoaded', function () {
      const elems = document.querySelectorAll('select');
      M.FormSelect.init(elems);
      document.getElementById('gradeSelect').addEventListener('change', updateSchoolDays);
      updateSchoolDays();
    });
  </script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
</body>
</html>